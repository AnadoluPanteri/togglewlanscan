#!/bin/sh

case "$1" in
    configure)
        # Copy the correct desktop file in place depending on what the gconf value is
        SCAN_INTERVAL=`gconftool -g /system/osso/connectivity/network_type/search_interval`
        if [ $SCAN_INTERVAL -gt 0 ]
        then
            SOURCE=/opt/togglewlanscan/data/togglewlanscan_off_harmattan.desktop
        else
            SOURCE=/opt/togglewlanscan/data/togglewlanscan_on_harmattan.desktop
        fi
        cp $SOURCE /usr/share/applications/togglewlanscan_harmattan.desktop

        # Change permissions so that running as user can replace the desktop file
        chmod a+rw /usr/share/applications/togglewlanscan_harmattan.desktop

    ;;

    abort-upgrade|abort-remove|abort-deconfigure)
    ;;

    *)
        echo "postinst called with unknown argument \`$1'" >&2
        exit 1
    ;;
esac

# dh_installdeb will replace this with shell code automatically
# generated by other debhelper scripts.

#DEBHELPER#

exit 0

